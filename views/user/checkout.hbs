<div class="container">
    <div class="row">
        <div class="col-md-4 order-md-2 mb-4">
            <h4 class="d-flex justify-content-between align-items-center mb-3">
                <span class="text-muted">Your cart</span>
                <span class="badge badge-secondary badge-pill">3</span>
            </h4>

            <ul class="list-group mb-3 sticky-top">
                {{!-- <li class="list-group-item d-flex justify-content-between lh-condensed">
                    <div>
                        <h6 class="my-0">{{this.name}}</h6>
                        <small class="text-muted">Brief description</small>
                    </div>
                    <span class="text-muted">$12</span>
                </li>
                <li class="list-group-item d-flex justify-content-between lh-condensed">
                    <div>
                        <h6 class="my-0">Second product</h6>
                        <small class="text-muted">Brief description</small>
                    </div>
                    <span class="text-muted">$8</span>
                </li>
                <li class="list-group-item d-flex justify-content-between lh-condensed">
                    <div>
                        <h6 class="my-0">Third item</h6>
                        <small class="text-muted">Brief description</small>
                    </div>
                    <span class="text-muted">$5</span>
                </li> --}}
                <li class="list-group-item d-flex justify-content-between lh-condensed">
                    <div>
                        <h6 class="my-0">Total</h6>
                        {{!-- <small class="text-muted">Brief description</small> --}}
                    </div>
                    <span class="text-muted">{{total}}</span>
                </li>

                <li class="list-group-item d-flex justify-content-between bg-light">
                    <div class="text-success">
                        <h6 class="my-0">Promo code</h6>
                        <small>EXAMPLECODE</small>
                    </div>
                    <div class="text-success">
                        -₹<span class="text-success" id="coupon-offer">0</span>
                    </div>

                </li>
                <li class="list-group-item d-flex justify-content-between">
                    <span>Total Price(INR)</span>
                    <strong>₹<span id="final-amount">{{total}}</span></strong>
                </li>
            </ul>



            <form class="card p-2" id="redeem-coupon" method="post">
                <div><small style="color: red;" id="coupon-condition"></small></div>
                <div class="input-group">
                    <input type="text" class="form-control" id="coupon-form" name="coupon" placeholder="Promo code">
                    <div class="input-group-append">
                        <button type="submit" class="btn btn-secondary">Redeem</button>
                        <div id="coupon-condition"></div>
                    </div>

                </div>

            </form>
        </div>
        <div class="col-md-8 order-md-1">

            <h4 class="mb-3">Billing address</h4>

            <div class="grid">

                <form method="post" id="checkout-form">
                    {{#each address}}

                    <label class="card">
                        <input type="radio" name="addressId" value="{{this.address._id}}" class="radio" checked>

                        <span class="plan-details">
                            <span class="plan-type">Address {{inc @index}}</span>
                            <span class="plan-cost">{{this.address.address}}</span>
                            <span>{{this.address.streetname}},{{this.address.city}}</span>
                            <span>{{this.address.state}},{{this.address.country}}</span>
                            <span>{{this.address.pincode}}</span>
                            <div class="float-end">
                                {{!-- <button
                                    style="background-color: #5e3bfa; border-radius: 3px; border: 0;color: rgba(255, 255, 255, 0.822);"><i
                                        class="bi-2 bi-pen"></i></button> --}}
                                {{!-- <button
                                    style="background-color: #dd3838; border-radius: 3px; border: 0;color: rgba(255, 255, 255, 0.822);"><i
                                        class="bi-2 bi-trash"></i></button> --}}
                            </div>
                        </span>

                    </label>

                    {{/each}}


                    <div class="mb-3 mt-3 d-flex justify-content-end">
                        <button style="background-color: rgb(27, 139, 27); border: none; border-radius: 4px;"
                            id="addnew" data-bs-toggle="modal" data-bs-target="#exampleModal" data-bs-whatever="@mdo"><i
                                class="bi bi-plus-circle"></i> Add New</button>
                    </div>

                    {{!--
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="firstName">First name</label>
                            <input type="text" class="form-control" name="firstName" id="firstName" placeholder=""
                                value="" required>
                            <div class="invalid-feedback"> Valid first name is required. </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="lastName">Last name</label>
                            <input type="text" class="form-control" name="lastName" id="lastName" placeholder=""
                                value="" required>
                            <div class="invalid-feedback"> Valid last name is required. </div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="email">Email (Optional) <span class="text-muted"></span></label>
                        <input type="email" class="form-control" name="email" id="email"
                            placeholder="Enter Valid Mail Id">
                        <div class="invalid-feedback"> Please enter a valid email address for shipping updates. </div>
                    </div>
                    <div class="mb-3">
                        <label for="phonenumber">Phone Number <span class="text-muted"></span></label>
                        <input type="text" name="phonenumber" class="form-control" id="phonenumber"
                            placeholder="Enter Valid Contact Id" required>
                        <div class="invalid-feedback"> Please enter a valid Mobile Number for shipping updates. </div>
                    </div>

                    <div class="mb-3">
                        <label for="alternatenumber">Alternate Phone Number (optional) <span
                                class="text-muted"></span></label>
                        <input type="tel" class="form-control" name="alterntenumber" id="alterntenumber"
                            placeholder="Enter Valid Contact Id(optional)">
                        <div class="invalid-feedback"> Please enter a valid Mobile Number for shipping updates. </div>
                    </div>

                    <div class="mb-3">
                        <label for="address">Address</label>
                        <input type="text" class="form-control" name="address" id="address" placeholder="1234 Main St"
                            required>
                        <div class="invalid-feedback"> Please enter your shipping address. </div>
                    </div>
                    <div class="mb-3">
                        <label for="address2">Address 2 <span class="text-muted">(Optional)</span></label>
                        <input type="text" class="form-control" name="alternativeaddress" id="address2"
                            placeholder="Apartment or suite">
                    </div>
                    <div class="row">
                        <div class="col-md-5 mb-3">
                            <label for="country">Country</label>
                            <select class="custom-select d-block w-100" name="country" id="country" required>
                                <option value="">Choose...</option>
                                <option>United States</option>
                            </select>
                            <div class="invalid-feedback"> Please select a valid country. </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="state">State</label>
                            <select class="custom-select d-block w-100" name="state" id="state" required>
                                <option value="">Choose...</option>
                                <option>California</option>
                            </select>
                            <div class="invalid-feedback"> Please provide a valid state. </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="zip">Zip</label>
                            <input type="text" class="form-control" name="zip" id="zip" placeholder="" required>
                            <div class="invalid-feedback"> Zip code required. </div>
                        </div>

                    </div>
                    <input type="hidden" name="userId" value="{{user._id}}">
                    <hr class="mb-4">
                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="same-address">
                        <label class="custom-control-label" for="same-address">Shipping address is the same as my
                            billing
                            address</label>
                    </div>
                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="save-info">
                        <label class="custom-control-label" for="save-info">Save this information for next time</label>
                    </div> --}}
                    
                    <div class="col-md position-absolute"   id="positionForProceedToPay">
                        <input type="hidden" value="{{total}}" name="total" id="totalCheckOutAmount">
                        <input type="hidden" name="coupon" id="isCoupon">
                        <hr class="mb-4">
                        <h4 class="mb-3">Payment</h4>
                        <div class="d-block my-3">
                            <div class="custom-control custom-radio">
                                <input id="cod" name="paymentMethod" type="radio" class="custom-control-input"
                                    value="COD" required="">
                                <label class="custom-control-label" for="credit">CASH ON DELIVERY</label>
                            </div>
                            <div class="custom-control custom-radio">
                                <label class="custom-control-label">
                                    <input id="online" name="paymentMethod" type="radio" class="custom-control-input"
                                        value="ONLINE" required="">
                                    ONLINE</label>
                            </div>
                            <div class="custom-control custom-radio">
                                <label class="custom-control-label">
                                    <input id="paypal" name="paymentMethod" type="radio" class="custom-control-input"
                                        value="PAYPAL" required=""> PayPal</label>
                            </div>
                            {{#if wallet.walletBalance}}
                            <div class="custom-control">
                                <label class="custom-control-label">
                                    <input id="wallet" name="wallet" type="checkbox" class="custom-control-input"
                                        value="{{wallet.walletBalance}}"> Use Wallet Rs({{wallet.walletBalance}})</label>
                            </div>
                            {{/if}}

                        </div>
                        {{!-- <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="cc-name">Name on card</label>
                                <input type="text" class="form-control" id="cc-name" placeholder="" required="">
                                <small class="text-muted">Full name as displayed on card</small>
                                <div class="invalid-feedback"> Name on card is required </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="cc-number">Credit card number</label>
                                <input type="text" class="form-control" id="cc-number" placeholder="" required="">
                                <div class="invalid-feedback"> Credit card number is required </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3 mb-3">
                                <label for="cc-expiration">Expiration</label>
                                <input type="text" class="form-control" id="cc-expiration" placeholder="" required="">
                                <div class="invalid-feedback"> Expiration date required </div>
                            </div>
                            <div class="col-md-3 mb-3">
                                <label for="cc-cvv">CVV</label>
                                <input type="text" class="form-control" id="cc-cvv" placeholder="" required="">
                                <div class="invalid-feedback"> Security code required </div>
                            </div>
                        </div> --}}
                        <hr class="mb-4">
                        <button class="btn btn-primary btn-lg btn-block" type="submit">Proceed To Pay</button>
                    </div>

                </form>
            </div>

        </div>

    </div>


    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel" style="color: white;">New Address</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                {{!-- form start --}}
                <form action="/checkout/add-address" method="post">

                    <div class="modal-body">

                        <div class="row gx-3 mb-3">
                            <!-- Form Group (first name)-->
                            <div class="col-md-6">
                                <label class="small mb-1" for="firstName" style="color: white;">First Name</label>
                                <input class="form-control" id="firstname" type="text" name="firstname"
                                    placeholder="Enter your first name" required>
                            </div>
                            <!-- Form Group (last name)-->
                            <div class="col-md-6">
                                <label class="small mb-1" for="LastName" style="color: white;">Last Name</label>
                                <input class="form-control" id="LastName" type="text" name="lastname"
                                    placeholder="Enter your last name" required>
                            </div>
                        </div>
                        <!-- Form Group (housename)-->
                        <div class="mb-3">
                            <label class="small mb-1" for="email" style="color: white;">E-Mail ID</label>
                            <input class="form-control" id="email" type="email" name="email"
                                placeholder="Enter your mail Id(OPTIONAL)">
                        </div>
                        <!-- Form Row-->
                        <div class="row gx-3 mb-3">
                            <!-- Form Group (first name)-->
                            <div class="col-md-6">
                                <label class="small mb-1" for="inputstreettName" style="color: white;">Street
                                    Name</label>
                                <input class="form-control" id="streetName" type="text" name="streetname"
                                    placeholder="Enter your street name" required>
                            </div>
                            <!-- Form Group (last name)-->
                            <div class="col-md-6">
                                <label class="small mb-1" for="city" style="color: white;">City/District</label>
                                <input class="form-control" id="city" type="text" name="city"
                                    placeholder="Enter your city name" required>
                            </div>
                        </div>
                        <!-- Form Row        -->

                        <!-- Form Group (email address)-->
                        <div class="mb-3">
                            <label class="small mb-1" for="housename" style="color: white;">House Name</label>
                            <input class="form-control" id="housename" type="text" name="address"
                                placeholder="Enter your address" required>
                        </div>

                        <div class="row gx-3 mb-3">
                            <!-- Form Group (phone number)-->
                            <div class="col-md-6">
                                <label for="country" style="color: white;">Country</label>
                                <select class="custom-select d-block w-100" name="country" id="country" required>
                                    <option value="" disabled="disabled">Choose...</option>
                                    <option>India</option>
                                </select>
                            </div>
                            <!-- Form Group (birthday)-->
                            <div class="col-md-6">
                                <label for="state" style="color: white;">State</label>
                                <select class="custom-select d-block w-100" name="state" id="state" required>
                                    <option value="" disabled="disabled">Choose...</option>
                                    <option>Kerala</option>
                                    <option>Maharashtra</option>
                                    <option>Tamil Nadu</option>

                                </select>
                            </div>
                        </div>
                        <!-- Form Row-->
                        <div class="row gx-3 mb-3">
                            <div class="col-md-6">
                                <label class="small mb-1" for="pincode" style="color: white;">Pincode</label>
                                <input class="form-control" id="pincode" type="number" name="pincode"
                                    placeholder="Enter your Pincode" required>
                            </div>
                            <!-- Form Group (phone number)-->
                            <div class="col-md-6">
                                <label class="small mb-1" for="inputPhone" style="color: white;">Phone number</label>
                                <input class="form-control" id="inputPhone" type="tel" name="phonenumber"
                                    placeholder="Enter your phone number" required>
                            </div>


                        </div>
                        <input type="hidden" name="userId" value="{{user._id}}">



                    </div>
                    <div class="modal-footer">
                        <button type="reset" class="btn btn-secondary" data-bs-dismiss="modal">clear</button>
                        <button type="submit" class="btn btn-primary">Save</button>
                    </div>
                </form>
                {{!-- form end --}}
            </div>
        </div>
    </div>

    <style>
        .container {
            margin-top: 70px;
            max-width: 960px;
        }

         

        .lh-condensed {
            line-height: 1.25;
        }

        :root {
            --card-line-height: 1.2em;
            --card-padding: 1em;
            --card-radius: 0.5em;
            --color-green: #558309;
            --color-gray: #e2ebf6;
            --color-dark-gray: #c4d1e1;
            --radio-border-width: 2px;
            --radio-size: 1.5em;
        }

        body {

            background: #eee;
            font-family: 'Noto Sans', sans-serif;

        }

        .grid {
            display: grid;
            grid-gap: var(--card-padding);
            margin: 0 auto;
            max-width: 60em;
            padding: 0;

            @media (min-width: 42em) {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .card {
            background-color: #fff;
            border-radius: var(--card-radius);
            position: relative;

            &:hover {
                box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.15);
            }
        }

        .radio {
            font-size: inherit;
            margin: 0;
            position: absolute;
            right: calc(var(--card-padding) + var(--radio-border-width));
            top: calc(var(--card-padding) + var(--radio-border-width));
        }

        @supports(-webkit-appearance: none) or (-moz-appearance: none) {
            .radio {

                background: #fff;
                border: var(--radio-border-width) solid var(--color-gray);
                border-radius: 50%;
                cursor: pointer;
                height: var(--radio-size);
                outline: none;
                transition:
                    background 0.2s ease-out,
                    border-color 0.2s ease-out;
                width: var(--radio-size);

                &::after {
                    border: var(--radio-border-width) solid #fff;
                    border-top: 0;
                    border-left: 0;
                    content: '';
                    display: block;
                    height: 0.75rem;
                    left: 25%;
                    position: absolute;
                    top: 50%;
                    transform:
                        rotate(45deg) translate(-50%, -50%);
                    width: 0.375rem;
                }

                &:checked {
                    background: var(--color-green);
                    border-color: var(--color-green);
                }
            }

            .card:hover .radio {
                border-color: var(--color-dark-gray);

                &:checked {
                    border-color: var(--color-green);
                }
            }
        }

        .plan-details {
            border: var(--radio-border-width) solid var(--color-gray);
            border-radius: var(--card-radius);
            cursor: pointer;
            display: flex;
            flex-direction: column;
            padding: var(--card-padding);
            transition: border-color 0.2s ease-out;
        }

        .card:hover .plan-details {
            border-color: var(--color-dark-gray);
        }

        .radio:checked~.plan-details {
            border-color: var(--color-green);
        }

        .radio:focus~.plan-details {
            box-shadow: 0 0 0 2px var(--color-dark-gray);
        }

        .radio:disabled~.plan-details {
            color: var(--color-dark-gray);
            cursor: default;
        }

        .radio:disabled~.plan-details .plan-type {
            color: var(--color-dark-gray);
        }

        .card:hover .radio:disabled~.plan-details {
            border-color: var(--color-gray);
            box-shadow: none;
        }

        .card:hover .radio:disabled {
            border-color: var(--color-gray);
        }

        .plan-type {
            color: var(--color-green);
            font-size: 1.5rem;
            font-weight: bold;
            line-height: 1em;
        }

        .plan-cost {
            font-size: 2.5rem;
            font-weight: bold;
            padding: 0.5rem 0;
        }

        .slash {
            font-weight: normal;
        }

        .plan-cycle {
            font-size: 2rem;
            font-variant: none;
            border-bottom: none;
            cursor: inherit;
            text-decoration: none;
        }

        .hidden-visually {
            border: 0;
            clip: rect(0, 0, 0, 0);
            height: 1px;
            margin: -1px;
            overflow: hidden;
            padding: 0;
            position: absolute;
            white-space: nowrap;
            width: 1px;
        }

        .modal-content {
            background-color: dimgray;
        }
    </style>